!function(){var e,n,t;!function(i){function s(e,n){return y.call(e,n)}function a(e,n){var t,i,s,a,o,r,l,c,u,d,f,m=n&&n.split("/"),p=w.map,h=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(n){for(m=m.slice(0,m.length-1),e=e.split("/"),o=e.length-1,w.nodeIdCompat&&k.test(e[o])&&(e[o]=e[o].replace(k,"")),e=m.concat(e),u=0;u<e.length;u+=1)if(f=e[u],"."===f)e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((m||h)&&p){for(t=e.split("/"),u=t.length;u>0;u-=1){if(i=t.slice(0,u).join("/"),m)for(d=m.length;d>0;d-=1)if(s=p[m.slice(0,d).join("/")],s&&(s=s[i])){a=s,r=u;break}if(a)break;!l&&h&&h[i]&&(l=h[i],c=u)}!a&&l&&(a=l,r=c),a&&(t.splice(0,r,a),e=t.join("/"))}return e}function o(e,n){return function(){return m.apply(i,C.call(arguments,0).concat([e,n]))}}function r(e){return function(n){return a(n,e)}}function l(e){return function(n){v[e]=n}}function c(e){if(s(g,e)){var n=g[e];delete g[e],b[e]=!0,f.apply(i,n)}if(!s(v,e)&&!s(b,e))throw new Error("No "+e);return v[e]}function u(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function d(e){return function(){return w&&w.config&&w.config[e]||{}}}var f,m,p,h,v={},g={},w={},b={},y=Object.prototype.hasOwnProperty,C=[].slice,k=/\.js$/;p=function(e,n){var t,i=u(e),s=i[0];return e=i[1],s&&(s=a(s,n),t=c(s)),s?e=t&&t.normalize?t.normalize(e,r(n)):a(e,n):(e=a(e,n),i=u(e),s=i[0],e=i[1],s&&(t=c(s))),{f:s?s+"!"+e:e,n:e,pr:s,p:t}},h={require:function(e){return o(e)},exports:function(e){var n=v[e];return"undefined"!=typeof n?n:v[e]={}},module:function(e){return{id:e,uri:"",exports:v[e],config:d(e)}}},f=function(e,n,t,a){var r,u,d,f,m,w,y=[],C=typeof t;if(a=a||e,"undefined"===C||"function"===C){for(n=!n.length&&t.length?["require","exports","module"]:n,m=0;m<n.length;m+=1)if(f=p(n[m],a),u=f.f,"require"===u)y[m]=h.require(e);else if("exports"===u)y[m]=h.exports(e),w=!0;else if("module"===u)r=y[m]=h.module(e);else if(s(v,u)||s(g,u)||s(b,u))y[m]=c(u);else{if(!f.p)throw new Error(e+" missing "+u);f.p.load(f.n,o(a,!0),l(u),{}),y[m]=v[u]}d=t?t.apply(v[e],y):void 0,e&&(r&&r.exports!==i&&r.exports!==v[e]?v[e]=r.exports:d===i&&w||(v[e]=d))}else e&&(v[e]=t)},e=n=m=function(e,n,t,s,a){if("string"==typeof e)return h[e]?h[e](n):c(p(e,n).f);if(!e.splice){if(w=e,w.deps&&m(w.deps,w.callback),!n)return;n.splice?(e=n,n=t,t=null):e=i}return n=n||function(){},"function"==typeof t&&(t=s,s=a),s?f(i,e,n,t):setTimeout(function(){f(i,e,n,t)},4),m},m.config=function(e){return m(e)},e._defined=v,t=function(e,n,t){n.splice||(t=n,n=[]),s(v,e)||s(g,e)||(g[e]=[e,n,t])},t.amd={jQuery:!0}}(),t("../bower_components/almond/almond",function(){}),t("neue/carousel",[],function(){var e=window.jQuery;e(function(){function n(){0===s?s=a:s--}function t(){s===a?s=0:s++}function i(i){e("#slide"+s).removeClass("visible"),"prev"===i?n():t(),e("#slide"+s).addClass("visible")}e("#slide0").addClass("visible");var s=0,a=e(".slide").length-1,o=e("#prev, #next");o.click(function(){i(e(this).attr("id"))})})}),t("neue/events",[],function(){var e={},n=-1,t=function(n,t){return e[n]?(setTimeout(function(){for(var i=e[n],s=i?i.length:0;s--;)i[s].func(n,t)},0),!0):!1},i=function(t,i){e[t]||(e[t]=[]);var s=(++n).toString();return e[t].push({token:s,func:i}),s},s=function(n){for(var t in e)if(e[t])for(var i=0,s=e[t].length;s>i;i++)if(e[t][i].token===n)return e[t].splice(i,1),n;return!1};return{publish:t,subscribe:i,unsubscribe:s}}),t("neue/jump-scroll",[],function(){var e=window.jQuery;e(function(){e(".js-jump-scroll").on("click",function(n){n.preventDefault();var t=e(this).attr("href");e("html,body").animate({scrollTop:e(n.target.hash).offset().top},"slow",function(){window.location.hash=t})})})}),t("neue/menu",[],function(){var e=window.jQuery;e(function(){e(".js-toggle-mobile-menu").on("click",function(){e(".chrome--nav").toggleClass("is-visible")}),e(".js-footer-col").addClass("is-collapsed"),e(".js-footer-col h4").on("click",function(){window.matchMedia("screen and (max-width: 768px)").matches&&e(this).closest(".js-footer-col").toggleClass("is-collapsed")})})}),t("neue/messages",[],function(){var e=window.jQuery,n='<a href="#" class="js-close-message message-close-button white">Ã—</a>',t=function(t,i){t.append(n),t.on("click",".js-close-message",function(n){n.preventDefault(),e(this).parent(".messages").slideUp(),i&&"function"==typeof i&&i()})};return e(function(){t(e(".messages"))}),{attachCloseButton:t}}),t("neue/modal",["require","./events"],function(e){var n=window.jQuery,t=window.Modernizr,i=e("./events"),s=!1,a=null,o=null,r=null,l=!1,c=function(){return s},u=function(e){e.preventDefault();var t="";n(this).data("cached-modal")?t=n(n(this).data("cached-modal")):"#"===e.target.hash.charAt(0)&&(t=n(e.target.hash)),d(t)},d=function(e,c){c=c||{},c.animated="undefined"!=typeof c.animated?c.animated:!0,c.closeButton="undefined"!=typeof c.closeButton?c.closeButton:e.attr("data-modal-close"),c.skipForm="undefined"!=typeof c.skipForm?c.skipForm:e.attr("data-modal-skip-form");var u=e.attr("id");switch(u?(r="#"+u,window.location.hash="#"+u):r="","undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackEvent","Modal","Open",r,null,!0]),s?(o.removeClass(),o.addClass("modal-content"),o.addClass(e.attr("class")),o.html(n(e).html())):(a=n('<div class="modal"></div>'),o=n("<div></div>"),a.append(o),o.html(e.html()),n("body").addClass("modal-open"),n("body").append(a),c.animated&&t.cssanimations&&(a.addClass("fade-in"),o.addClass("fade-in-up")),o.removeClass(),o.addClass("modal-content"),o.addClass(e.attr("class")),a.show(),a.on("click",".js-close-modal",f),a.on("click",f),s=!0,/iPhone|iPad|iPod/i.test(window.navigator.userAgent)&&setTimeout(function(){a.css({position:"absolute",overflow:"visible",height:n(document).height()+"px"}),o.css({"margin-top":n(document).scrollTop()+"px"})},0)),c.closeButton){case"skip":var d=n(c.skipForm),m=n("<a href='#' class='js-close-modal modal-close-button -alt'>skip</a>");o.prepend(m),m.on("click",function(e){e.preventDefault(),d.submit()}),l=!1;break;case"yes":case"true":case"1":o.prepend("<a href='#' class='js-close-modal modal-close-button'>&#215;</a>"),l=!0;break;default:l=!1}var p=e.attr("data-modal-close-class");p&&o.find(".js-close-modal").addClass(p),i.publish("Modal:opened",o);var h=n(".messages"),v=o.find(".js-messages-clone");v&&h.length&&(v.addClass("modal-messages"),v.html(h[0].outerHTML),v.find(".js-close-message").remove())},f=function(e){e.target===this&&(n(this).hasClass("js-close-modal")||l)&&(e.preventDefault(),m())},m=function(e){e="undefined"!=typeof e?e:!0,window.location.hash===r&&(window.location.hash="/"),"undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackEvent","Modal","Close",r,null,!0]),e&&t.cssanimations?(o.addClass("fade-out-down"),a.addClass("fade-out"),n("body").removeClass("modal-open"),a.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){a.remove(),s=!1})):(n("body").removeClass("modal-open"),a.remove(),s=!1)};return n(document).ready(function(){n("body").on("click",".js-modal-link",u);var e=window.location.hash;e&&"#/"!==e&&n(e)&&"text/cached-modal"===n(e).attr("type")&&d(n(e),!1)}),{isOpen:c,open:d,close:m}}),t("neue/scroll-indicator",[],function(){function e(){s=[],i(".js-scroll-indicator").each(function(e,t){n(t)})}function n(e){var n=i(e).attr("href"),a=i(n).offset().top,o={$el:i(e),targetOffset:a};s.push(o),t()}function t(){i.each(s,function(e,n){var t=i(window).scrollTop()+n.$el.height();return t>n.targetOffset?(i(".js-scroll-indicator").removeClass("is-active"),void n.$el.addClass("is-active")):void 0})}var i=window.jQuery,s=[];i(function(){e(),i(window).on("scroll",t),i(window).on("resize",e)})}),t("neue/sticky",[],function(){function e(){s=[],i(".js-sticky").each(function(e,t){n(t)})}function n(e){var n=i(e).offset().top,a={$el:i(e),offset:n};s.push(a),t()}function t(){i.each(s,function(e,n){i(window).scrollTop()>n.offset?n.$el.addClass("is-stuck"):n.$el.removeClass("is-stuck")})}var i=window.jQuery,s=[];i(function(){e(),i(window).on("scroll",t),i(window).on("resize",e)})}),t("neue/validation",["require","./events"],function(e){var n=window.jQuery,t=e("./events"),i=[],s=function(e){e.each(function(){var e=n(this);a(n("label[for='"+e.attr("id")+"']")),e.on("blur",function(n){n.preventDefault(),o(e)})})},a=function(e){if(0===e.find(".inner-label").length){var t=n("<div class='inner-label'></div>");t.append("<div class='label'>"+e.html()+"</div>"),t.append("<div class='message'></div>"),e.html(t)}},o=function(e,t,s){t="undefined"!=typeof t?t:!1,s="undefined"!=typeof s?s:function(e,n){c(e,n)};var a=e.data("validate"),r=e.data("validate-trigger");if(r&&o(n(r)),i[a])if(f(e)){var l=e.val();if(t||""!==l)if("match"===a){var u=n(e.data("validate-match")).val();i[a].fn(l,u,function(n){s(e,n)})}else i[a].fn(l,function(n){s(e,n)})}else if("match"===a){var d=n(e.data("validate-match"));i[a].fn(e,d,function(n){s(e,n)})}else i[a].fn(e,function(n){s(e,n)})},r=function(e,n){if(i[e])throw"A validation function with that name has already been registered";i[e]=n},l=function(e,n){var t={fn:n};r(e,t)},c=function(e,i){var s=n("label[for='"+e.attr("id")+"']"),a=s.find(".message");return e.removeClass("success error warning shake"),a.removeClass("success error warning"),i.success===!0?(e.addClass("success"),a.addClass("success")):(e.addClass("error"),a.addClass("error"),f(e)&&e.addClass("shake"),t.publish("Validation:InlineError",s.attr("for"))),i.message&&a.text(i.message),i.suggestion&&(a.html("Did you mean "+i.suggestion.full+"? <a href='#' data-suggestion='"+i.suggestion.full+"'class='js-mailcheck-fix'>Fix it!</a>"),t.publish("Validation:Suggestion",i.suggestion.domain)),s.addClass("show-message"),n(".js-mailcheck-fix").on("click",function(e){e.preventDefault();var i=n("#"+n(this).closest("label").attr("for"));i.val(n(this).data("suggestion")),i.trigger("blur"),t.publish("Validation:SuggestionUsed",n(this).text())}),e.on("focus",function(){e.removeClass("warning error success shake"),s.removeClass("show-message")}),i.success},u=function(e){var n=e.find(":submit");n.attr("disabled",!0),"BUTTON"===n.prop("tagName")&&n.addClass("loading")},d=function(e){var n=e.find(":submit");n.attr("disabled",!1),n.removeClass("loading disabled")},f=function(e){var n=e.prop("tagName");return"INPUT"===n||"SELECT"===n||"TEXTAREA"===n};return n("body").on("submit","form",function(e,i){var s=n(this),a=s.find("[data-validate]").filter("[data-validate-required]");if(u(s),0===a.length)return!0;if(i===!0)return!0;e.preventDefault();var r=0,l=0;return a.each(function(){o(n(this),!0,function(e,i){r++,c(e,i),i.success&&l++,r===a.length&&(l===a.length?(t.publish("Validation:Submitted",n(this).attr("id")),s.trigger("submit",!0)):(t.publish("Validation:SubmitError",n(this).attr("id")),d(s)))})}),!1}),l("match",function(e,n,t){return t(e===n&&""!==e?{success:!0,message:"Looks good!"}:{success:!1,message:"That doesn't match."})}),n(function(){s(n("body").find("[data-validate]")),t.subscribe("Modal:opened",function(e,n){s(n.find("[data-validate]"))})}),{prepareFields:s,registerValidation:r,registerValidationFunction:l,validateField:o,showValidationMessage:c,Validations:i}}),t("neue/main",["require","./carousel","./events","./jump-scroll","./menu","./messages","./modal","./scroll-indicator","./sticky","./validation"],function(e){return window.NEUE={Carousel:e("./carousel"),Events:e("./events"),JumpScroll:e("./jump-scroll"),Menu:e("./menu"),Messages:e("./messages"),Modal:e("./modal"),ScrollIndicator:e("./scroll-indicator"),Sticky:e("./sticky"),Validation:e("./validation")},window.NEUE}),n(["neue/main"])}();
//# sourceMappingURL=neue.js.map