!function(){var e,n,t;!function(i){function a(e,n){return k.call(e,n)}function o(e,n){var t,i,a,o,s,r,l,c,u,d,f,p=n&&n.split("/"),m=b.map,h=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(n){for(p=p.slice(0,p.length-1),e=e.split("/"),s=e.length-1,b.nodeIdCompat&&C.test(e[s])&&(e[s]=e[s].replace(C,"")),e=p.concat(e),u=0;u<e.length;u+=1)if(f=e[u],"."===f)e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||h)&&m){for(t=e.split("/"),u=t.length;u>0;u-=1){if(i=t.slice(0,u).join("/"),p)for(d=p.length;d>0;d-=1)if(a=m[p.slice(0,d).join("/")],a&&(a=a[i])){o=a,r=u;break}if(o)break;!l&&h&&h[i]&&(l=h[i],c=u)}!o&&l&&(o=l,r=c),o&&(t.splice(0,r,o),e=t.join("/"))}return e}function s(e,n){return function(){return p.apply(i,y.call(arguments,0).concat([e,n]))}}function r(e){return function(n){return o(n,e)}}function l(e){return function(n){v[e]=n}}function c(e){if(a(g,e)){var n=g[e];delete g[e],w[e]=!0,f.apply(i,n)}if(!a(v,e)&&!a(w,e))throw new Error("No "+e);return v[e]}function u(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function d(e){return function(){return b&&b.config&&b.config[e]||{}}}var f,p,m,h,v={},g={},b={},w={},k=Object.prototype.hasOwnProperty,y=[].slice,C=/\.js$/;m=function(e,n){var t,i=u(e),a=i[0];return e=i[1],a&&(a=o(a,n),t=c(a)),a?e=t&&t.normalize?t.normalize(e,r(n)):o(e,n):(e=o(e,n),i=u(e),a=i[0],e=i[1],a&&(t=c(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:t}},h={require:function(e){return s(e)},exports:function(e){var n=v[e];return"undefined"!=typeof n?n:v[e]={}},module:function(e){return{id:e,uri:"",exports:v[e],config:d(e)}}},f=function(e,n,t,o){var r,u,d,f,p,b,k=[],y=typeof t;if(o=o||e,"undefined"===y||"function"===y){for(n=!n.length&&t.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(f=m(n[p],o),u=f.f,"require"===u)k[p]=h.require(e);else if("exports"===u)k[p]=h.exports(e),b=!0;else if("module"===u)r=k[p]=h.module(e);else if(a(v,u)||a(g,u)||a(w,u))k[p]=c(u);else{if(!f.p)throw new Error(e+" missing "+u);f.p.load(f.n,s(o,!0),l(u),{}),k[p]=v[u]}d=t?t.apply(v[e],k):void 0,e&&(r&&r.exports!==i&&r.exports!==v[e]?v[e]=r.exports:d===i&&b||(v[e]=d))}else e&&(v[e]=t)},e=n=p=function(e,n,t,a,o){if("string"==typeof e)return h[e]?h[e](n):c(m(e,n).f);if(!e.splice){if(b=e,b.deps&&p(b.deps,b.callback),!n)return;n.splice?(e=n,n=t,t=null):e=i}return n=n||function(){},"function"==typeof t&&(t=a,a=o),a?f(i,e,n,t):setTimeout(function(){f(i,e,n,t)},4),p},p.config=function(e){return p(e)},e._defined=v,t=function(e,n,t){n.splice||(t=n,n=[]),a(v,e)||a(g,e)||(g[e]=[e,n,t])},t.amd={jQuery:!0}}(),t("../bower_components/almond/almond",function(){}),t("neue/carousel",[],function(){var e=window.jQuery;e(function(){function n(){0===a?a=o:a--}function t(){a===o?a=0:a++}function i(i){e("#slide"+a).removeClass("is-visible"),"prev"===i?n():t(),e("#slide"+a).addClass("is-visible")}e("#slide0").addClass("is-visible");var a=0,o=e(".carousel__slide").length-1,s=e("#prev, #next");s.click(function(){i(e(this).attr("id"))})})}),t("neue/events",[],function(){var e={},n=-1,t=function(n,t){return e[n]?(setTimeout(function(){for(var i=e[n],a=i?i.length:0;a--;)i[a].func(n,t)},0),!0):!1},i=function(t,i){e[t]||(e[t]=[]);var a=(++n).toString();return e[t].push({token:a,func:i}),a},a=function(n){for(var t in e)if(e[t])for(var i=0,a=e[t].length;a>i;i++)if(e[t][i].token===n)return e[t].splice(i,1),n;return!1};return{publish:t,subscribe:i,unsubscribe:a}}),t("neue/jump-scroll",[],function(){var e=window.jQuery;e(function(){e(".js-jump-scroll").on("click",function(n){n.preventDefault();var t=e(this).attr("href");e("html,body").animate({scrollTop:e(n.target.hash).offset().top},"slow",function(){window.location.hash=t})})})}),t("neue/media-options",[],function(){var e=window.jQuery,n=function(t,i){if(void 0!==t&&e(t.length)){if(!this instanceof n)return new n(t,i);var a=this;i=i||{},a.options=i={fieldClassName:"string"==typeof i.fieldClassName?i.fieldClassName:"media-options",fieldSelector:"string"==typeof i.fieldSelector?i.fieldSelector:".-radio",optionSelector:"string"==typeof i.optionSelector?i.optionSelector:"label"},a.$fieldGroup=e(t).addClass(a.options.fieldClassName),a.$checked=[],a.init()}};n.prototype={init:function(){var n=this;n.$fieldGroup.find(n.options.fieldSelector).each(function(){var t=e(this);t.find("input[type='radio']:checked").length>0&&n.check(t),t.find(n.options.optionSelector).on("click",function(){n.$checked.length>0&&n.uncheck(n.$checked),n.check(t)})})},check:function(e){e.addClass("is-selected").find("input[type='radio']").attr("checked",!0),this.$checked=e},uncheck:function(e){e.removeClass("is-selected").find("input[type='radio']").attr("checked",!1)}},e(function(){e(".js-media-options").each(function(){new n(e(this),null)})})}),t("neue/menu",[],function(){var e=window.jQuery;e(function(){e(".js-navigation-toggle").on("touchstart mousedown",function(n){n.preventDefault(),e(".chrome").toggleClass("mobile-menu-open"),e(".navigation").toggleClass("is-visible")});var n=e(".js-toggle-collapsed");n.addClass("is-collapsed is-toggleable"),n.on("click",function(){window.matchMedia("screen and (max-width: 768px)").matches&&e(this).toggleClass("is-collapsed")})})}),t("neue/messages",[],function(){var e=window.jQuery,n='<a href="#" class="js-close-message messages__close"><span>Close</span></a>',t=function(t,i){t.append(n),t.on("click",".js-close-message",function(n){n.preventDefault(),e(this).parent(".messages").slideUp(),i&&"function"==typeof i&&i()})};return e(function(){t(e(".messages"))}),{attachCloseButton:t}}),t("neue/modal",["require","./events"],function(e){var n=window.jQuery,t=window.Modernizr,i=e("./events"),a=!1,o=null,s=n(document),r=n(".chrome"),l=null,c=n("<a href='#' class='js-close-modal js-modal-generated modal-close-button -alt'>skip</a>"),u=n("<a href='#' class='js-close-modal js-modal-generated modal-close-button'>&#215;</a>"),d=null,f=!1,p=function(){return null!==d},m=function(e,t,i){switch(t){case"skip":e.prepend(c),c.on("click",function(e){e.preventDefault(),n(i).submit()}),f=!1;break;case"false":case"0":f=!1;break;default:e.prepend(u),f=!0}},h=function(e,n){if(n=n||{},n.animated="boolean"==typeof n.animated?n.animated:!0,n.closeButton="undefined"!=typeof n.closeButton?n.closeButton:e.attr("data-modal-close"),n.skipForm="undefined"!=typeof n.skipForm?n.skipForm:e.attr("data-modal-skip-form"),0===e.length)return!1;if(!a)return o={$el:e,options:n},!1;var c="-"+s.scrollTop()+"px";m(e,n.closeButton,n.skipForm),p()?(d.hide(),e.show()):(r.css("top",c),r.addClass("modal-open"),l.css("display","block"),n.animated&&t.cssanimations&&l.addClass("animated-open"),e.css("display","block")),setTimeout(function(){s.scrollTop(0)},50),i.publish("Modal:Open",e),d=e},v=function(e){l.css("display","none"),l.removeClass("animated-close"),d.css("display","none"),d.find(".js-modal-generated").remove(),r.removeClass("modal-open"),r.css("top",""),s.scrollTop(e),d=null},g=function(e){e=e||{},e.animated="undefined"!=typeof e.animated?e.animated:!0;var n=-1*parseInt(r.css("top"));e.animated&&t.cssanimations?(l.addClass("animated-close"),l.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){v(n)})):v(n),window.location.hash==="#"+d.attr("id")&&(window.location.hash="/"),i.publish("Modal:Close",d)},b=function(e){e.preventDefault();var t=n(this).data("modal-href");h(n(t))},w=function(e){e.target===this&&(n(this).hasClass("js-close-modal")||f)&&(e.preventDefault(),g())};return s.ready(function(){var e=n("body");l=n("<div class='modal-container'></div>"),e.append(l),n("[data-modal]").each(function(){n(this).appendTo(l),n(this).attr("hidden",!0)});var t=window.location.hash;t&&"#/"!==t&&n(t)&&"undefined"!=typeof n(t).data("modal")&&h(n(t)),a=!0,null!==o&&h(o.$el,o.options),e.on("click","[data-modal-href]",b),e.on("click",".modal-container",w),e.on("click",".js-close-modal",w)}),{isOpen:p,open:h,close:g}}),t("neue/scroll-indicator",[],function(){function e(e,n,t){for(var i=0,a=e?e.length:i;a>i;){var o=i+a>>>1;e[o][t]<n?i=o+1:a=o}return i?i-1:i}function n(n,t){var i=e(n,t,"offset");return n[i]}function t(e){var n=s(e.attr("href"));n.length&&r.push({offset:n.offset().top,link:e})}function i(){r=[],s(".js-scroll-indicator").find("a").each(function(e,n){t(s(n))})}function a(){var e=n(r,s(window).scrollTop()+40);if(e&&e.link){var t=e.link.parentsUntil(".js-scroll-indicator"),i=s();o&&o!==e&&(o.link.removeClass("is-active"),i=o.link.parentsUntil(".js-scroll-indicator")),e.link.addClass("is-active"),t.addClass("is-active"),i.not(t).removeClass("is-active"),o=e}}var o,s=window.jQuery,r=[],l=function(e,n,t){var i,a,o,s=null,r=0;t||(t={});var l=function(){r=new Date,s=null,o=e.apply(i,a)};return function(){var c=new Date;r||t.leading!==!1||(r=c);var u=n-(c-r);return i=this,a=arguments,0>=u?(clearTimeout(s),s=null,r=c,o=e.apply(i,a)):s||t.trailing===!1||(s=setTimeout(l,u)),o}};s(function(){i();var e=l(a,60);s(window).on("scroll",e),s(window).on("resize",i)})}),t("neue/tabs",[],function(){var e=window.jQuery,n=e(".js-tabs"),t=n.find(".tabs__menu a");n.each(function(){e(this).find(".tabs__tab").first().addClass("is-active")}),t.on("click",function(n){n.preventDefault();var t=e(this),i=t.parent().siblings(),a=t.data("tab")-1,o=t.closest(".js-tabs").find(".tabs__tab"),s=o.get(a);i.removeClass("is-active"),t.parent().addClass("is-active"),o.removeClass("is-active"),e(s).addClass("is-active")})}),t("neue/validation",["require","./events"],function(e){var n=window.jQuery,t=e("./events"),i=[],a=function(e){e.each(function(){var e=n(this);o(n("label[for='"+e.attr("id")+"']")),e.on("blur",function(n){n.preventDefault(),s(e)})})},o=function(e){if(0===e.find(".validation").length){var t=n("<div class='validation'></div>");t.append("<div class='validation__label'>"+e.html()+"</div>"),t.append("<div class='validation__message'></div>"),e.html(t)}},s=function(e,t,a){t="undefined"!=typeof t?t:!1,a="undefined"!=typeof a?a:function(e,n){c(e,n)};var o=e.data("validate"),r=e.data("validate-trigger");if(r&&s(n(r)),!i[o])return void console.error("A validation with the name "+o+" has not been registered.");if(f(e)){var l=e.val();if(t||""!==l)if("match"===o){var u=n(e.data("validate-match")).val();i[o].fn(l,u,function(n){a(e,n)})}else i[o].fn(l,function(n){a(e,n)})}else if("match"===o){var d=n(e.data("validate-match"));i[o].fn(e,d,function(n){a(e,n)})}else i[o].fn(e,function(n){a(e,n)})},r=function(e,n){if(i[e])throw"A validation function with that name has already been registered";i[e]=n},l=function(e,n){var t={fn:n};r(e,t)},c=function(e,i){var a,o=n("label[for='"+e.attr("id")+"']"),s=o.find(".validation"),r=s.find(".validation__message"),l=o.height();return e.removeClass("-success -error -warning shake"),r.removeClass("-success -error -warning"),i.success===!0?(e.addClass("-success"),r.addClass("-success")):(e.addClass("-error"),r.addClass("-error"),f(e)&&e.addClass("shake"),t.publish("Validation:InlineError",o.attr("for"))),i.message&&r.text(i.message),i.suggestion&&(r.html("Did you mean "+i.suggestion.full+"? <a href='#' data-suggestion='"+i.suggestion.full+"'class='js-mailcheck-fix'>Fix it!</a>"),t.publish("Validation:Suggestion",i.suggestion.domain)),a=r.height(),a>l?o.css("height",a+"px"):o.css("height",""),s.addClass("is-showing-message"),n(".js-mailcheck-fix").on("click",function(e){e.preventDefault();var i=n("#"+n(this).closest("label").attr("for"));i.val(n(this).data("suggestion")),i.trigger("blur"),t.publish("Validation:SuggestionUsed",n(this).text())}),e.on("focus",function(){e.removeClass("-warning -error -success shake"),s.removeClass("is-showing-message"),o.css("height","")}),i.success},u=function(e){var n=e.find(":submit");n.attr("disabled",!0),n.addClass("is-loading")},d=function(e){var n=e.find(":submit");n.attr("disabled",!1),n.removeClass("loading disabled")},f=function(e){var n=e.prop("tagName");return"INPUT"===n||"SELECT"===n||"TEXTAREA"===n};return n("body").on("submit","form",function(e,i){var a=n(this),o=a.find("[data-validate]");if(u(a),o=o.map(function(){var e=n(this);return"undefined"!=typeof e.attr("data-validate-required")||""!==e.val()?e:void 0}),0===o.length)return!0;if(i===!0)return!0;e.preventDefault();var r=0,l=0,f=!1;return o.each(function(){s(n(this),!0,function(e,i){r++,c(e,i),i.success&&l++,f||i.success!==!1||(f=!0,n("html,body").animate({scrollTop:e.offset().top-32},200)),r===o.length&&(l===o.length?(t.publish("Validation:Submitted",n(this).attr("id")),a.trigger("submit",!0)):(t.publish("Validation:SubmitError",n(this).attr("id")),d(a)))})}),!1}),l("match",function(e,n,t){return t(e===n&&""!==e?{success:!0,message:"Looks good!"}:{success:!1,message:"That doesn't match."})}),n(function(){a(n("body").find("[data-validate]"))}),{prepareFields:a,registerValidation:r,registerValidationFunction:l,validateField:s,showValidationMessage:c,Validations:i}}),t("neue/main",["require","./carousel","./events","./jump-scroll","./media-options","./menu","./messages","./modal","./scroll-indicator","./tabs","./validation"],function(e){return window.NEUE={Carousel:e("./carousel"),Events:e("./events"),JumpScroll:e("./jump-scroll"),MediaSelector:e("./media-options"),Menu:e("./menu"),Messages:e("./messages"),Modal:e("./modal"),ScrollIndicator:e("./scroll-indicator"),Tabs:e("./tabs"),Validation:e("./validation")},window.NEUE}),n(["neue/main"])}();
//# sourceMappingURL=neue.js.map